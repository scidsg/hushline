{% extends "base.html" %}

{% block title %}Settings{% endblock %}

{% block content %}
  {% set aliases_enabled = alias_mode == AliasMode.ALWAYS or (alias_mode == AliasMode.PREMIUM and not user.is_free_tier) %}
  <h2>Settings</h2>
  <div class="settings-tabs">
    <ul class="tab-list" role="tablist">
      {% with buttons = [
        ('profile', 'Profile', True),
        ('aliases', 'Aliases', aliases_enabled),
        ('auth', 'Authentication', True),
        ('email', 'Email & Encryption', True),
        ('branding', 'Branding', user.is_admin),
        ('files', 'Files', file_uploads_enabled),
        ('advanced', 'Advanced', True),
        ('admin', 'Admin', user.is_admin)
      ] %}
        {% for (id, display_name, should_show) in buttons %}
          {% if should_show %}
            <li role="presentation">
              <button
                type="button"
                class="tab{% if loop.first %} active{% endif %}"
                data-tab="{{ id }}"
                role="tab"
                aria-selected="{% if loop.first %}true{% else %}false{% endif %}"
                aria-controls="{{ id }}"
                id="{{ id }}-tab"
              >
                {{ display_name }}
              </button>
            </li>
          {% endif %}
        {% endfor %}
      {% endwith %}
    </ul>
  </div>
  <div>
    {% include "settings/profile.html" %}
    {% if aliases_enabled %}
      {% include "settings/aliases.html" %}
    {% endif %}
    {% include "settings/auth.html" %}
    {% include "settings/email.html" %}
    {% include "settings/files.html" %}
    {% include "settings/advanced.html" %}
    {% if user.is_admin %}
      {% include "settings/branding.html" %}
      {% include "settings/admin.html" %}
    {% endif %}
  </div>
{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='js/settings.js') }}"></script>
{% endblock %}
